{"version":3,"sources":["components/Video/Video.js","components/Video/index.js"],"names":["Video","useState","errorMessage","setErrorMessage","hints","Map","set","zxing","TRY_HARDER","reader","useEffect","start","Promise","resolve","reject","decodeOnceFromVideoDevice","document","getElementById","then","catch","result","style","display","alert","getText","addEventListener","e","err","message","error","navigator","mediaDevices","getUserMedia","video","facingMode","stream","canvas","querySelector","ctsx","getContext","beginPath","width","window","screen","height","pX","faceArea","pY","clearRect","rect","lineWidth","strokeStyle","stroke","drawImage","className","src","alt","id","process"],"mappings":"wNAmGeA,G,OA/FD,WAAO,IAAD,EACwBC,mBAAS,IADjC,mBACTC,EADS,KACKC,EADL,KAEVC,EAAQ,IAAIC,IAClBD,EAAME,IAAIC,iBAAqBC,YAAY,GAC3C,IAAMC,EAAS,IAAIF,2BAA+BH,EAAO,KAwEzD,OA5CAM,qBAAU,YA1BI,SAARC,IACS,IAAIC,SAAQ,SAACC,EAASC,GAC7BL,EAAOM,0BAA0B,KAAMC,SAASC,eAC5C,UAECC,KAAKL,GACLM,MAAML,MAEVI,MAAK,SAACE,GACHJ,SAASC,eAAe,YAAYI,MAAMC,QAAU,OACpDC,MAAMH,EAAOI,WACbb,IACYK,SAASC,eAAe,SAC9BQ,iBAAiB,kBAAkB,SAASC,GAC9CV,SAASC,eAAe,YAAYI,MAAMC,QAAU,cAG3DH,OAAM,SAAAQ,GACHxB,EAAgBwB,EAAIC,YAEzBT,OAAM,SAAAU,GACL1B,EAAgB0B,EAAMD,YAU1BjB,MAGAmB,UAAUC,aAAaC,cACvBF,UAAUC,aAAaC,aAAa,CAAEC,MAAO,CAACC,WAAY,iBACrDhB,MAAM,SAASiB,GACAnB,SAASC,eAAe,SAC9BQ,iBAAiB,kBAAkB,SAASC,IAY9D,WACI,IAAIU,EAASpB,SAASqB,cAAc,aACpC,GAAe,OAAXD,EAAiB,CACjB,IAAIE,EAAOF,EAAOG,WAAW,MAC7BD,EAAKE,YACLJ,EAAOK,MAAQC,OAAOC,OAAOF,MAC7BL,EAAOQ,OAASF,OAAOC,OAAOC,OAC9BR,EAAOf,MAAMoB,MAAQ,OACrBL,EAAOf,MAAMuB,OAAS,OACtB,IACIC,EAAKT,EAAOK,MAAQ,EAAIK,IACxBC,EAAKX,EAAOQ,OAAS,EAAIE,IAC7BR,EAAKU,UAAU,EAAG,EAAGZ,EAAOK,MAAOL,EAAOQ,QAC1CN,EAAKW,KAAKJ,EAAIE,EAJC,SAKfT,EAAKY,UAAY,IACjBZ,EAAKa,YAAc,UACnBb,EAAKc,UA3BGC,SAgCZ,yBAAKC,UAAU,mBACX,yBAAKA,UAAU,cACX,yBAAKC,IAAI,4FAA4FC,IAAI,UAE7G,yBAAKC,GAAG,WACJ,yBAAKA,GAAG,gBAAgBF,IAAKG,wBAA6CF,IAAI,gBAElF,yBAAKF,UAAU,gCACX,yBAAKA,UAAU,OAAOpD,GACtB,yBAAKoD,UAlCC,UAmCF,2BAAOG,GAAG,UACV,4BAAQA,GAAG,kBC1FhBzD","file":"static/js/4.9a26a26d.chunk.js","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport * as zxing from \"@zxing/library\";\r\nimport \"./video.css\";\r\n\r\nconst Video = () => {\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n    const hints = new Map();\r\n    hints.set(zxing.DecodeHintType.TRY_HARDER, true);\r\n    const reader = new zxing.BrowserMultiFormatReader(hints, 1000);\r\n\r\n    const start = () => {\r\n        const p1 = new Promise((resolve, reject) => {\r\n            reader.decodeOnceFromVideoDevice(null, document.getElementById(\r\n                \"video\"\r\n            ))\r\n                .then(resolve)\r\n                .catch(reject);\r\n        })\r\n            .then((result: zxing.Result) => {\r\n                document.getElementById(\"idcanvas\").style.display = \"none\";\r\n                alert(result.getText());\r\n                start();\r\n                var video = document.getElementById('video');\r\n                video.addEventListener('loadedmetadata', function(e){\r\n                    document.getElementById(\"idcanvas\").style.display = \"block\";\r\n                });\r\n            })\r\n            .catch(err => {\r\n                setErrorMessage(err.message);\r\n            });\r\n        p1.catch(error => {\r\n            setErrorMessage(error.message);\r\n        });\r\n\r\n    };\r\n\r\n    useEffect(() => {\r\n        startOnload();\r\n    });\r\n\r\n    function startOnload() {\r\n        start();\r\n    }\r\n\r\n    if (navigator.mediaDevices.getUserMedia) {\r\n        navigator.mediaDevices.getUserMedia({ video: {facingMode: 'environment'}})\r\n            .then( function(stream) {\r\n                var video = document.getElementById('video');\r\n                video.addEventListener('loadedmetadata', function(e){\r\n                    drawImage();\r\n                });\r\n            }\r\n        )\r\n    };\r\n\r\n    function addClassName() {\r\n        let classes = \"video \";\r\n        return classes;\r\n    }\r\n\r\n    function drawImage() {\r\n        var canvas = document.querySelector(\"#idcanvas\");\r\n        if (canvas !== null) {\r\n            var ctsx = canvas.getContext('2d');\r\n            ctsx.beginPath();\r\n            canvas.width = window.screen.width;\r\n            canvas.height = window.screen.height;\r\n            canvas.style.width = \"100%\";\r\n            canvas.style.height = \"100%\";\r\n            var faceArea = 300;\r\n            var pX = canvas.width / 2 - faceArea / 2;\r\n            var pY = canvas.height / 2 - faceArea / 2;\r\n            ctsx.clearRect(0, 0, canvas.width, canvas.height);\r\n            ctsx.rect(pX, pY, faceArea, faceArea);\r\n            ctsx.lineWidth = \"6\";\r\n            ctsx.strokeStyle = \"#fe8e14\";\r\n            ctsx.stroke();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"dynam-info\">\r\n                <img src=\"https://www.centralgroup.com/themes/default/assets/static/images/logo/logo-white-gray.svg\" alt=\"logo\"/>\r\n            </div>\r\n            <div id=\"loading\">\r\n                <img id=\"loading-image\" src={process.env.PUBLIC_URL + '/bike_loader.gif'} alt=\"Loading...\" />\r\n            </div>\r\n            <div className=\"w-100 row align-items-center\">\r\n                <div className=\"row\">{errorMessage}</div>\r\n                <div className={addClassName()}>\r\n                    <video id=\"video\"/>\r\n                    <canvas id=\"idcanvas\"></canvas>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Video;\r\n","import Video from './Video';\r\n\r\nexport default Video;\r\n"],"sourceRoot":""}